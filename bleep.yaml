$schema: https://raw.githubusercontent.com/oyvindberg/bleep/master/schema.json
$version: 0.0.1-M21
jvm:
  name: graalvm-java17:22.3.0
projects:
  scripts:
    dependencies:
    - build.bleep::bleep-plugin-jni:0.0.1-M21+14-44fcb2d4+20221130-0048-SNAPSHOT
    - build.bleep::bleep-plugin-native-image:0.0.1-M21+14-44fcb2d4+20221130-0048-SNAPSHOT
    extends: template-scala-3-jvm
  tests:
    dependencies: org.scalatest::scalatest:3.2.13
    dependsOn: tui-scala
    extends: template-cross-all
    isTestProject: true
    sources: ../submodules/cassowary-rs/tests
  crossterm-jvm: {}
  cassowary-scala:
    extends: template-cross-all
    sources:
      - ../submodules/cassowary-rs/src
  tui-scala:
    dependsOn:
      - crossterm-jvm
      - cassowary-scala
    extends: template-cross-all
    platform:
      mainClass: tui.Crossterm
    sources:
      - ../submodules/tui-rs/src
  demo:
    dependencies:
    - org.graalvm.nativeimage:svm:22.3.0
    dependsOn: tui-scala
    extends: template-cross-all
    platform:
      mainClass: tui.demo
    sources: ../submodules/tui-rs/examples
scripts:
  gen-graalvm-native-binary: scripts/tui.scripts.GenNativeImage
  gen-headers: scripts/tui.scripts.GenHeaders
  gen-jni-library: scripts/tui.scripts.GenJniLibrary
templates:
  template-common:
    scala:
      options: -encoding utf8 -feature -unchecked
      strict: true
    source-layout: cross-full
  template-cross-all:
    cross:
      jvm213:
        extends: template-scala-2.13-jvm
      jvm3:
        extends: template-scala-3-jvm
    extends: template-common
  template-js:
    platform:
      jsNodeVersion: 18.4.0
      jsVersion: 1.9.0
      name: js
  template-jvm:
    platform:
      name: jvm
  template-native:
    platform:
      name: native
      nativeGc: immix
      nativeMode: debug
      nativeVersion: 0.4.7
  template-scala-2:
    scala:
      version: 2.13.6
  template-scala-2.13-js:
    extends:
    - template-js
    - template-scala-2
  template-scala-2.13-jvm:
    extends:
    - template-jvm
    - template-scala-2
  template-scala-2.13-native:
    extends:
    - template-native
    - template-scala-2
  template-scala-3:
    scala:
      version: 3.2.1
  template-scala-3-js:
    extends:
    - template-js
    - template-scala-3
  template-scala-3-jvm:
    extends:
    - template-jvm
    - template-scala-3
  template-scala-3-native:
    extends:
    - template-native
    - template-scala-3
